---
title: 成功日记（十五）
date: 2020-8-30 18:00:17
tags: 成功日记
index_img: https://i.loli.net/2020/05/14/nbsRNlMKUdCDfyP.png
banner_img: https://i.loli.net/2020/05/14/nbsRNlMKUdCDfyP.png
---





# 成功日记（十五）

## 《穷查理宝典》

目前已看到查理十一讲中的**第三讲 论基本的、普世的智慧（修正稿）**

#### 掌握跨学科方法

查理认为想要获得普世的智慧，那么掌握各种思维模型，让知识融汇贯通是比绝大多数方法都有效的。像巴菲特和通用电气CEO 杰克·韦尔奇，他们都是掌握这种方法的人，杰克·韦尔奇拥有工程学博士学位，巴菲特了解很多学科的专业知识。不要理会学科的法定界限，因为世界的组成是多种多样的，而实际上世界是一个整体，只是人们为了方便理解事物人为划分为了很多学科。掌握多学科思维模型，不需要你去了解所有的知识，只要吸取各个学科的精华部分就好。

> **如果我们试图理解一样看似独立存在的东西，我们将会发现它和宇宙间的其他一切都有联系。**	
>																																						——约翰·缪尔
> 																																					

#### 要远离极端的意识形态

**严重的意识形态会扭曲人的思想**，像中东的恐怖分子，自爆前还会喊一句”安拉胡可吧“(真主万岁)，在他们的意识形态里，生命一文不值，只有伟大的、唯一的真主才重要，傻孩子，真主其实也只不过是掌权者为了获取自己利益而推出来的傀儡罢了。

意识形态可以理解为一个人的思想和观念，如果你深受某种意识形态的影响，那你就是自己给自己桎梏，禁锢自己的思想，你的认知会被扭曲。比如：你相信的政府一定是腐败到底的，或者相信你的政府一定是清廉的白莲花，那你就变成了傻子。

还有像香港近来一直在闹民粹主义，要民主，民主到底是什么？这个东西就一定好吗？

美国有个阿拉斯加州，就是俄罗斯旁边那个，这块地原本是俄国的，被**美国国务卿威廉·西华德（William Seward）**以每英亩两分钱的价格买下来，当时国内骂声一片，并称阿拉斯加为**西华德冰箱**，然而到了今天，阿拉斯加有很多机场，帮航空公司节省了大量成本，并在上面部署了很多反导系统，使俄罗斯不得不发展**远程导弹**，如果真的民主，就应该听民众的，把阿拉斯加还给俄国，那么美国人过的日子肯定没今天这么舒服。





## 《经济学原理》

目前进度**第八章：税收的代价**

说明税收如何影响福利的先请看一张图

![Tax.png](https://i.loli.net/2020/08/29/XDxfFehESBA6Qqg.png)

此时市场的价格为P1，市场销量为Q1，市场总剩余为：A+B+C+D+E+F

而有税收之后又会发生什么变化呢？我们用一张图表来表示

![TaxTable.png](https://i.loli.net/2020/08/29/jLuwTVivq1sbdZC.png)

有了税收之后，使消费者剩余减少了 B+C，生产者剩余减少了 D+E，税收收入增加了 B+D，税收使买卖者状况变坏了，政府状况变好了，但你此时将三者收益相加 （A+B+D+F），发现市场总剩余少了 C+E。

税收引起的总剩余减少被称为**无谓损失**。C+E的面积是无谓损失的规模。

为什么会产生无谓损失？因为市场的**供需规律**，当你收取税收时，提高了买者的价格，降低了卖者的价格，于是买者会少买物品，卖者会比之前少生产物品，**市场规模缩小**，所以产生了无谓损失。

那么什么因素决定无谓损失大还是小呢？

![TaxNAP.png](https://i.loli.net/2020/08/29/vrWPTeQYOXMckd6.png)



**供给和需求的价格弹性越大，产生的无谓损失也越大。**





## 《计算机网络原理》

目前已经看到了**第二章 网络应用**，写篇笔记复习一下看过的知识。

#### 域名系统(Domain Name System，DNS)

DNS是网络上一个重要的基础应用，它的功能就是**将域名映射为IP地址**。实现将域名映射为IP地址的过程，称为过程解析。

打个比方，假设你要来我家玩（你要访问我的网站），你就要到我家所在的经纬度（网站的IP地址和端口号），但这样非常不方便记忆，所以一般都是告诉你地名（域名），我家在XX市XX区XX街道。域名和IP地址的关系，就类似经纬度和地名的关系，DNS就是中间转换的这么一个应用。



#### HTTP

HTTP是Web应用的应用层协议，定义浏览器如何向Web服务器发送请求以及Web服务器如何响应。

HTTP基于传输层的TCP传输报文。浏览器向服务器发送请求之前，首先需要先建立TCP连接，然后才能发送**请求HTTP报文**，并接收**响应HTTP报文。**HTTP在使用TCP连接的策略不同，分为**非持久连接**的HTTP和**持久连接**的HTTP。

- 非持久连接：非持久连接指HTTP客户与HTTP服务器建立TCP连接后，通过该连接发送HTTP请求报文，接收HTTP响应报文，然后断开连接。每请求传输一个对象，都需要建立新TCP连接，传输结束，断开连接。

  ![HTTPNotLong.jpg](https://i.loli.net/2020/08/29/8qtzS1dNZy47MBo.jpg)

- 持久连接：当客户端请求到Web页之后，可以访问Web页所在服务器其他资源(如图片，文件等)，这种情况可以不断开已经建立的TCP连接，称为持久连接。

  而持久连接分为**非流水式连接**和**流水式连接**

  1. 非流水式连接：客户端在通过持久连接接收到**前一个响应报文之后**，才发出对下一个对象的请求报文。
  2. 流水式连接：客户端在通过持久连接收到**前一个响应报文之前**，连续依次发送对后续对象的请求报文，然后通过该连接依次接收服务器发回的响应报文。

![HTTPLongCon.jpg](https://i.loli.net/2020/08/29/TOzkGuih1P26BKV.jpg)



#### Cookie

Cookie中文名小型文本文件，指某些网站为了辨别用户身份、进行会话跟踪而存储在用户本地终端上的数据。

Cookie一般由服务器端生成，发送给User-Agent(一般是浏览器)，浏览器会将Cookie的key/value保存到某个目录下的文本文件内，下次请求同一网站就发送该Cookie给服务器。

Cookie主要包括4部分内容：

1. 使用Cookie技术的网站，在给用户发送的HTTP响应报文中，通过Set-Cookie头行，发送大小通常超过4KB的Cookie信息，包括用户ID、用户对网站的访问偏好等
2. 浏览器每当获得新Cookie信息，便会在Cookie文件中追加一行Cookie信息，包括网站的域、路径、内容、有效期和安全5个字段。
3. 当用户向已经访问过且已经获得Cookie信息的网站发送HTTP请求报文时，浏览器会自动检索本地的Cookie文件，并在每个请求报文中通过Cookie头行，携带上网站为用户分配的Cookie信息。
4. 网站在后台数据库存储、维护Cookie信息



## Java小技巧

#### try-with-resources优于try-finally

许多java类库中都有通过调用**close**方法来手工关闭资源。比如**java.sql.Connection**、**InputStream**、**OutputStream**。

通常我们都是使用**try-finally**来关闭资源：

```java
    /**
     * 读取任意文件第一行
     * @param path 文件路径
     * @return  文件内容
     * @throws IOException 抛出异常
     */
    public static String  firstLineOfFile(String path) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(path));
        try {
            return br.readLine();
        } finally {
            br.close();
        }
    }
```

看起来也不是很麻烦，如果你引用两个资源呢？

```java
    /**
     * 拷贝文件
     * @param src   源文件路径
     * @param dst   目标文件路径
     * @throws IOException  抛出异常
     */
    public static void copy(String src,String dst) throws IOException {
        InputStream in = new FileInputStream(src);
        try{
            OutputStream out = new FileOutputStream(dst);
            try{
                byte[] buf = new byte[5];
                int n;
                while((n = in.read(buf)) >= 0 )
                    out.write(buf,0,n);
            } finally {
                out.close();
            }
        } finally {
            in.close();
        }
    }
```

这看起来和写**if-else**没啥区别，破坏了代码的可读性，当我们使用了**try-with-resources**，这个问题迎刃而解。

使用**try-with-resources**第一个例子

```java
    public static String firstLineOfFile(String path) throws IOException {
        try(BufferedReader br = new BufferedReader(
                new FileReader(path)
        )){
            return br.readLine();
        }
    }
```

使用**try-with-resources**第二个例子

```java
    public static void copy(String src,String dst) throws IOException {
        try(InputStream in = new FileInputStream(src);
            OutputStream out = new FileOutputStream(dst)
                ){
            byte[] buf = new byte[5];
            int n;
            while ((n = in.read(buf)) >= 0)
                out.write(buf,0,n);
        }
    }
```

发现了吗？使用**try-with-resources**的好处就是不用再去手动**close**资源，使代码变得简洁易懂。书上形容这种写法**short and sweet**。我们依然还可以在**try-with-resources**增加**catch**子句来处理发生异常后的流程。

**try-with-resources**不仅可以使用jdk内置类，开发者也可以通过实现**java.lang.AutoCloseable**接口，然后使自己的类可以在**try-with-resources**生效：

**AutoCloseable**就一个方法：

```java
public interface AutoClosable{
    public void close() throws Exception;
}
```

下面自己写一个简单的例子

```java
public class MyClose implements AutoCloseable {

    public void doSomething(){
        System.out.println("MyClose Do Something！");
    }

    @Override
    public void close() throws Exception {
        System.out.println("MyClose Closed!");
    }
}
```

这样我们也能在**try-with-resources**使用自己的类了：

```java
    public static void myAutoClose() throws Exception {
        try(MyClose myClose = new MyClose()){
            myClose.doSomething();
        }
    }

输出：	MyClose Do Something！
      MyClose Closed!
```



结论：在处理必须关闭的资源时，始终要优先考虑使用**try-with-resources**，而不是复杂的**try-finally**。



## Keep

**√**打卡

<div align="center">
<img src="https://i.loli.net/2020/08/29/x7qo8dT2StgXwRa.jpg">
</div>